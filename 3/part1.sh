#!/bin/bash
seq $(echo "$(cat 3.txt | wc -l)" | bc) | xargs -n1 bash -c 'comm -12 <(echo "$0" | sed -n "s/^$((($1 * 2) - 1)) \(.*\)/\1/p") <(echo "$0" | sed -n "s/^$(($1 * 2)) \(.*\)/\1/p") | uniq' "$(cat 3.txt | awk '{print (NR*2)-1 " " substr($0, 0, length($0)/2) "\n" (NR*2) " " substr($0, (length($0)/2) + 1, length($0))}' | xargs -n2 bash -c 'echo $1 | sed "s/\(.\)/$0 \1\n/g"' | sort -n -k1,1 -k2,2)" | sed 's/a/1/g; s/b/2/g; s/c/3/g; s/d/4/g; s/e/5/g; s/f/6/g; s/g/7/g; s/h/8/g; s/i/9/g; s/j/10/g; s/k/11/g; s/l/12/g; s/m/13/g; s/n/14/g; s/o/15/g; s/p/16/g; s/q/17/g; s/r/18/g; s/s/19/g; s/t/20/g; s/u/21/g; s/v/22/g; s/w/23/g; s/x/24/g; s/y/25/g; s/z/26/g; s/A/27/g; s/B/28/g; s/C/29/g; s/D/30/g; s/E/31/g; s/F/32/g; s/G/33/g; s/H/34/g; s/I/35/g; s/J/36/g; s/K/37/g; s/L/38/g; s/M/39/g; s/N/40/g; s/O/41/g; s/P/42/g; s/Q/43/g; s/R/44/g; s/S/45/g; s/T/46/g; s/U/47/g; s/V/48/g; s/W/49/g; s/X/50/g; s/Y/51/g; s/Z/52/g' | paste -sd+ - | bc
